<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>YouTube Trending Analytics Dashboard</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>

  <!-- App JS -->
  <script defer src="app.js"></script>
</head>
<body>
  <header>
    <div>
      <h1>YouTube Trending Analytics Dashboard</h1>
      <span> Uses YouTube Data API v3 </span>
    </div>
  </header>

  <main class="container">
    <section class="top-grid">
      <!-- Chat -->
      <div class="chat-box">
        <div class="chat-header">Chat with your YouTube analytics assistant</div>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-row">
          <input
            id="chatInput"
            type="text"
            placeholder='Try: "Show top 20 trending videos in India" or "Which video has highest views in gaming category?"'
          />
          <button id="chatSendBtn">Send</button>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls-card">
        <div class="form-row">
          <div class="field">
            <label for="region">Region</label>
            <select id="region">
              <option value="US">United States (US)</option>
              <option value="IN">India (IN)</option>
              <option value="GB">United Kingdom (GB)</option>
              <option value="DE">Germany (DE)</option>
              <option value="FR">France (FR)</option>
              <option value="JP">Japan (JP)</option>
              <option value="BR">Brazil (BR)</option>
            </select>
          </div>
          <div class="field">
            <label for="limit">Number of trending videos</label>
            <input id="limit" type="number" min="1" max="50" value="25" />
          </div>
          <div class="field">
            <label for="startDate">From publish date</label>
            <input id="startDate" type="date" />
          </div>
          <div class="field">
            <label for="endDate">To publish date</label>
            <input id="endDate" type="date" />
          </div>
          <div class="field">
            <label for="categoryFilter">Category</label>
            <select id="categoryFilter">
              <option value="__ALL__">All categories</option>
            </select>
          </div>
          <div class="field" style="min-width:auto;">
            <button class="main-btn" id="loadBtn">Load trending</button>
            <div id="status" class="status"></div>
          </div>
        </div>
        <div class="form-row">
          <button class="main-btn small" id="saveSnapshotBtn">Save snapshot</button>
          <button class="main-btn small" id="exportCsvBtn">Export CSV</button>
          <div id="savedInfo" class="status"></div>
        </div>
        <div style="font-size: 11px; color:#9ca3af; margin-top:4px;">
          Date & category filters apply on the current trending snapshot (by video publish date & category).
        </div>
      </div>
    </section>

    <section class="metrics-grid" id="metricsGrid"></section>

    <section class="charts-grid">
      <div class="chart-card">
        <div class="chart-title">Top trending videos by views</div>
        <div id="views-chart"></div>
      </div>
      <div class="chart-card">
        <div class="chart-title">Views by category</div>
        <div id="category-chart"></div>
      </div>
    </section>

    <section class="table-card">
      <div class="table-title">Trending videos</div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Title</th>
              <th>Channel</th>
              <th>Category</th>
              <th>Views</th>
              <th>Likes</th>
              <th>Comments</th>
              <th>Duration</th>
              <th>Published</th>
            </tr>
          </thead>
          <tbody id="videosTableBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Snapshots manager -->
    <section class="table-card">
      <div class="table-title">Saved snapshots (local to this browser)</div>
      <div id="snapshotsEmpty" class="status">No snapshots saved yet.</div>
      <div class="table-container" id="snapshotsTableContainer" style="display:none;">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Region</th>
              <th>Dates</th>
              <th>Category</th>
              <th>Saved at</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="snapshotsTableBody"></tbody>
        </table>
      </div>
    </section>
  </main>
</body>
</html>

